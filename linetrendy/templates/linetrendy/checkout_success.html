<!-- checkouy_success.html -->
{% extends 'linetrendy/base.html' %}

{% block content %}
<section class="bg-gray-100 min-h-screen flex items-center justify-center p-4 sm:p-10">
  <div class="bg-white shadow-md rounded-lg p-8 max-w-2xl w-full text-center">
    
    <!-- Success Icon -->
    <div class="mb-6">
      <svg xmlns="http://www.w3.org/2000/svg" class="mx-auto h-16 w-16 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
      </svg>
    </div>
    
    <!-- Heading -->
    <h1 class="text-3xl font-bold text-blue-600 mb-4">Thank you for your order!</h1>
    
    <!-- Payment/Order Confirmation -->
    <p class="text-gray-700 mb-6">
      Your payment was successfully processed. Your order # is 
      <span class="font-semibold text-gray-800">{{ order.order_number }}</span>.
    </p>
    
    <!-- Order Summary -->
    <div class="text-left border-t border-b border-gray-200 py-4 mb-6">
      <h2 class="text-xl font-semibold text-gray-800 mb-3">Order Summary</h2>

        {% for item in order_items %}
            <div class="flex justify-between mb-2">
                <span>{{ item.product_name }} Ã— {{ item.quantity }}</span>
                <span>${{ item.price|floatformat:2 }}</span>
            </div>
        {% endfor %}

      <div class="flex justify-between font-medium border-t pt-2">
        <span>Subtotal</span><span>${{ subtotal|floatformat:2 }}</span>
      </div>
      <div class="flex justify-between">
        <span>Shipping</span><span>${{ shipping_fee|floatformat:2 }}</span>
      </div>
      {% if discount %}
      <div class="flex justify-between text-green-600">
        <span>Discount</span><span>- ${{ discount|floatformat:2 }}</span>
      </div>
      {% endif %}
      <div class="flex justify-between font-bold text-lg border-t pt-2">
        <span>Total</span><span>${{ order.total_amount|floatformat:2 }}</span>
      </div>
    </div>

    <p class="text-gray-600 mb-6">
      A confirmation email has been sent to <span class="font-semibold">{{ order.user.email }}</span>.
      You can track your order status in your account dashboard
    </p>
    
    <!-- Continue Shopping Button -->
     {% if user.is_authenticated %}
    <a href="{% url 'shop:order_tracking' order.order_number %}" class="inline-block bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-6 rounded-lg transition">
      Track My Package
    </a>
    {% else %}
    <a href="{{ tracking_url }}" class="inline-block bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-6 rounded-lg transition">
      Track My Package
    </a>

    {% endif %}
  </div>
</section>
{% endblock %}

