{% extends 'linetrendy/base.html' %}



{% load static %}



{% block content %}

<!-- Product Detail Hero -->
<section class="py-12 px-4 md:px-12">
  <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-12 items-start">
    
    <!-- Product Image (align to top) -->
    <div class="w-full self-start">
      {% with product.get_first_image as first_image %}
        {% if first_image %}
          <img src="{{ first_image.image.url }}" 
               alt="{{ product.name }}" 
               class="w-full h-[500px] object-cover rounded-xl shadow-lg">
        {% endif %}
      {% endwith %}
    </div>
    
    <!-- Product Info (start at same top line) -->
    <div class="w-full flex flex-col justify-start space-y-6">
      <!-- remove any top margin that could push the heading down -->
      <h1 class="mt-0 text-4xl md:text-5xl font-bold text-red-600">{{ product.name }}</h1>

      <p class="text-lg text-blue-600 leading-relaxed">
        {{ product.description|linebreaksbr }}
      </p>

      {% if product.bestseller %}
        <span class="bg-red-500 text-white text-xs px-3 py-1 rounded-full w-fit">BESTSELLER</span>
      {% endif %}
      <hr>

      <div class="flex items-center space-x-4">
        <span class="text-3xl font-bold text-red-500">${{ product.price }}</span>
        <form 
          method="POST" 
          action="{% url 'shop:add_to_cart' %}" 
          hx-post="{% url 'shop:add_to_cart' %}" 
          hx-target="#cart-btn-{{ product.id }}" 
          hx-swap="outerHTML"
          class="add-to-cart-form">
          {% csrf_token %}
          <input type="hidden" name="product_id" value="{{ product.id }}">
          <input type="hidden" name="quantity" value="1">

          <div id="cart-btn-{{ product.id }}">
              <button type="submit" 
                  class="bg-red-600 text-white px-4 py-2 rounded-full text-sm transition transform active:scale-95 active:translate-y-1">
                  Add to Cart
              </button>
          </div>
      </form>
      </div>

      <div>
        <h3 class="text-lg font-semibold text-black mb-2">Category:</h3>
        <p class="text-gray-600">{{ product.category }}</p>
      </div>
    </div>

  </div>
</section>




<!-- Related Products -->
{% if related_products %}
<section class="py-24 bg-white">
  <div class="container mx-auto px-4">
    <h2 class="text-3xl font-bold text-center mb-12 text-black">Related Products</h2>
    
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
      
      <!-- Related Product 1 -->
      <div class="bg-white rounded-lg overflow-hidden shadow-md">
        <a href="#">

            {% with product.get_first_image as first_image %}
            {% if first_image %}
                <img src="{{ product.get_first_image.image.url }}"   class="w-full h-64 object-cover rounded-lg shadow-md" alt="{{ product.name }}">
            {% else %}
                <img class="w-full h-64 object-cover" src="https://images.unsplash.com/photo-1571781926291-c477ebfd024b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1888&q=80" alt="No image available">
            {% endif %}
        {% endwith %}

        </a>

        <div class="p-4">
          <h3 class="font-bold text-lg mb-1">Revitalizing Shampoo</h3>
          <p class="text-gray-600 text-sm mb-3">Gentle yet effective cleansing for everyday use.</p>
          <span class="font-bold text-red-500">$18.50</span>
        </div>
      </div>

      
    </div>
  </div>

  <br>
</section>
{% endif %}




{% endblock %}



